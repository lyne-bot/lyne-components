@use '../../global/styles' as sbb;

// Default component properties, defined for :host. Properties which can not
// travel the shadow boundary are defined through this mixin
@include sbb.host-component-properties;

:host {
  @include sbb.title-4;

  --sbb-navigation-action-gap: var(--sbb-spacing-responsive-xs);
  --sbb-navigation-marker-position-x: var(--sbb-spacing-fixed-1x);
  --sbb-navigation-marker-position-y: unset;
  --sbb-navigation-marker-width: #{sbb.px-to-rem-build(17)};
  --sbb-navigation-marker-height: var(--sbb-border-width-1x);
  --sbb-navigation-marker-padding-inline-start: var(--sbb-spacing-fixed-6x);
  --sbb-navigation-marker-typo-line-height: var(--sbb-typo-line-height-titles);
  --sbb-navigation-margin-inline-start: var(--sbb-spacing-fixed-3x);
  --sbb-navigation-marker-margin-block: calc(
    1em * var(--sbb-navigation-marker-typo-line-height) / 2 - var(--sbb-border-width-1x) / 2
  );

  position: relative;
  padding-inline-start: var(--sbb-navigation-marker-padding-inline-start);

  &::before {
    content: '';
    position: absolute;
    opacity: 0;
    left: var(--sbb-navigation-marker-position-x);
    top: var(--sbb-navigation-marker-position-y);
    width: var(--sbb-navigation-marker-width);
    height: var(--sbb-navigation-marker-height);
    background: var(--sbb-color-storm-default);
    margin-block: var(--sbb-navigation-marker-margin-block);
    transition: {
      duration: var(--sbb-animation-duration-6x);
      timing-function: ease;
      property: opacity, top;
    }

    @include sbb.if-forced-colors {
      background: CanvasText;
    }
  }
}

:host(.sbb-navigation-marker--visible)::before {
  opacity: 1;
}

:host([size='s']) {
  @include sbb.text-xxs--bold;

  --sbb-navigation-action-gap: var(--sbb-spacing-fixed-2x);
  --sbb-navigation-marker-width: #{sbb.px-to-rem-build(8)};
  --sbb-navigation-marker-typo-line-height: var(--sbb-typo-line-height-body-text);
  --sbb-navigation-margin-inline-start: var(--sbb-spacing-fixed-2x);
  --sbb-navigation-marker-position-x: calc(
    var(--sbb-navigation-marker-padding-inline-start) - var(--sbb-spacing-fixed-2x)
  );
  --sbb-navigation-marker-padding-inline-start: calc(
    var(--sbb-spacing-fixed-6x) + var(--sbb-spacing-fixed-1x)
  );
}

.sbb-navigation-marker__content {
  @include sbb.list-reset;

  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--sbb-navigation-action-gap);
}

::slotted(sbb-navigation-action) {
  margin-inline-start: var(--sbb-navigation-margin-inline-start);
}
